package ca.jay.jac444.assignment1;

import java.util.Date;

public class Visit {
	Customer customer;
	Date date;
	double serviceExpense;
	double productExpense;
	
	// one parameter constructor
	Visit(String name, Date date) throws Exception
	{
		if(name == null) throw new Exception ("Customer name must not be empty.");
		this.customer = new Customer(name);
		this.date = new Date();
		this.serviceExpense = 0.0d;
		this.productExpense = 0.0d;
	}
	
	// return customer's name
	// call the getName method of Customer
	public String getName()
	{
		return this.customer.getName();
	}
	
	// return service expense
	public double getServiceExpense()
	{
		return this.serviceExpense;
	}
	
	// set service expense
	public void setServiceExpense(double ex)
	{
		double sDiscount = DiscountRate.getServiceDiscountRate(this.customer.getMemberType());
		this.serviceExpense = ex * sDiscount;
	}	
	
	// return product expense
	public double getProductExpense()
	{
		return this.productExpense;
	}

	// set product expense
	public void setProductExpense(double ex)
	{
		double pDiscount = DiscountRate.getProductDiscountRate(this.customer.getMemberType());
		this.productExpense = ex * pDiscount;
	}		
	
	// return total expense
	public double getTotalExpense()
	{
		return this.serviceExpense + this.productExpense;
	}
	
	// override toStirng method
	public String toString()
	{
		StringBuffer sb = new StringBuffer();
		
		return sb.append("+++++++++++++++++++++++++++++")
			     .append("+" + this.customer + "+")
			     .append("+ Service Expense: " + this.getServiceExpense() + "     +")
	     		 .append("+ Product Expense: " + this.getProductExpense() + "     +")
	     		 .append("+ Total Expense: " + this.getTotalExpense() + "     +");
	     		 
		
	}
	
	
}
